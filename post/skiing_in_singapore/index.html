<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.38" />
  <meta name="author" content="Zhang Hao">

  
  
  
  
    
      
    
  
  <meta name="description" content="It is an online test provided by RedMart, who asks to solve a problem by using DFS algorithm. More details you can find here.
Discription Sometimes it&rsquo;s nice to take a break and code up a solution to a small, fun problem. Here is one some of our engineers enjoyed recently called Skiing In Singapore. Well you can’t really ski in Singapore. But let’s say you hopped on a flight to the Niseko ski resort in Japan.">

  
  <link rel="alternate" hreflang="en-us" href="https://isaacchanghau.github.io/post/skiing_in_singapore/">

  


  

  
  
  <meta name="theme-color" content="#3f51b5">
  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Playfair&#43;Display:400,700%7cFauna&#43;One">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="https://isaacchanghau.github.io/index.xml" type="application/rss+xml" title="Isaac Changhau">
  <link rel="feed" href="https://isaacchanghau.github.io/index.xml" type="application/rss+xml" title="Isaac Changhau">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://isaacchanghau.github.io/post/skiing_in_singapore/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@https://twitter.com/IsaacChanghau">
  <meta property="twitter:creator" content="@https://twitter.com/IsaacChanghau">
  
  <meta property="og:site_name" content="Isaac Changhau">
  <meta property="og:url" content="https://isaacchanghau.github.io/post/skiing_in_singapore/">
  <meta property="og:title" content="Skiing In Singapore | Isaac Changhau">
  <meta property="og:description" content="It is an online test provided by RedMart, who asks to solve a problem by using DFS algorithm. More details you can find here.
Discription Sometimes it&rsquo;s nice to take a break and code up a solution to a small, fun problem. Here is one some of our engineers enjoyed recently called Skiing In Singapore. Well you can’t really ski in Singapore. But let’s say you hopped on a flight to the Niseko ski resort in Japan.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2017-03-30T00:00:00&#43;08:00">
  
  <meta property="article:modified_time" content="2017-03-30T00:00:00&#43;08:00">
  

  

  <title>Skiing In Singapore | Isaac Changhau</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Isaac Changhau</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#tags">
            
            <span>Tags</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#publications">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#achievements">
            
            <span>Achievements</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Skiing In Singapore</h1>

    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-03-30 00:00:00 &#43;0800 &#43;08" itemprop="datePublished dateModified">
      Thu, Mar 30, 2017
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Zhang Hao">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 min read
  </span>
  

  
  

  

  
  

  

</div>

    
    <div class="article-style" itemprop="articleBody">
      

<p>It is an online test provided by <a href="https://redmart.com" target="_blank">RedMart</a>, who asks to solve a problem by using DFS algorithm. More details you can find <a href="http://geeks.redmart.com/2015/01/07/skiing-in-singapore-a-coding-diversion/" target="_blank">here</a>.</p>

<h2 id="discription">Discription</h2>

<p>Sometimes it&rsquo;s nice to take a break and code up a solution to a small, fun problem. Here is one some of our engineers enjoyed recently called Skiing In Singapore.
Well you can’t really ski in Singapore. But let’s say you hopped on a flight to the Niseko ski resort in Japan. Being a software engineer you can’t help but value efficiency, so naturally you want to ski as long as possible and as fast as possible without having to ride back up on the ski lift. So you take a look at the map of the mountain and try to find the longest ski run down.
In digital form the map looks like the number grid below.</p>

<pre><code>4 4
4 8 7 3
2 5 9 3
6 3 2 5
4 4 1 6
</code></pre>

<p>The first line (4 4) indicates that this is a 4x4 map. Each number represents the elevation of that area of the mountain. From each area (i.e. box) in the grid you can go north, south, east, west - but only if the elevation of the area you are going into is less than the one you are in. I.e. you can only ski downhill. You can start anywhere on the map and you are looking for a starting point with the longest possible path down as measured by the number of boxes you visit. And if there are several paths down of the same length, you want to take the one with the steepest vertical drop, i.e. the largest difference between your starting elevation and your ending elevation.
On this particular map the longest path down is of length = 5 and it’s highlighted in bold below: 9-5-3-2-1.</p>

<pre><code>4 4
4 8 7 3
2 5 9 3
6 3 2 5
4 4 1 6
</code></pre>

<p>There is another path that is also length five: 8-5-3-2-1. However the tie is broken by the first path being steeper, dropping from 9 to 1, a drop of 8, rather than just 8 to 1, a drop of 7.
The task is to write a program to find the longest (and then steepest) path on this map specified in the format above. It’s 1000x1000 in size, and all the numbers on it are between 0 and 1500.</p>

<h2 id="solution">Solution</h2>

<h3 id="traverse">Traverse</h3>

<p>Traversing every element of the matrix, which means traverse every location of the mountain geographically, and computing the maximal path length as well as the first maximal drop of such max length through dfs method.</p>

<pre><code class="language-java">// update the path matrix and drop matrix using dfs search
for (int i = 0; i &lt; row; i++) {
    for (int j = 0; j &lt; column; j++) {
        int[] tmp = dfsForPathAndDrop(i, j);
        path[i][j] = tmp[0];
        drop[i][j] = map[i][j] - map[tmp[1]][tmp[2]];
    }
}
</code></pre>

<h3 id="dfs-search">DFS search</h3>

<p>For each location (point), search its four neighbors, i.e., up, down, left, right, to find the value of any neighbor is small than its value, which means it is able to ski down, then update the path length for each recursion.</p>

<pre><code class="language-java">// computing the maximal path length and its drop
public static int[] dfsForPathAndDrop(int i, int j) {
    int[] pathAndDrop = { 0, i, j }; // first value is path length, follows by x,y values
    int[] curPathAndDrop = new int[2];
    // search from the up direction
    if (j &gt; 0 &amp;&amp; map[i][j] &gt; map[i][j - 1]) {
        curPathAndDrop = dfsForPathAndDrop(i, j - 1);
        if (curPathAndDrop[0] &gt; pathAndDrop[0]) // if the current path value is larger
            pathAndDrop = Arrays.copyOf(curPathAndDrop, curPathAndDrop.length); // update the path length
    }
    // search from the down direction
    if (j &lt; (column - 1) &amp;&amp; map[i][j] &gt; map[i][j + 1]) {
        curPathAndDrop = dfsForPathAndDrop(i, j + 1);
        if (curPathAndDrop[0] &gt; pathAndDrop[0])
            pathAndDrop = Arrays.copyOf(curPathAndDrop, curPathAndDrop.length);
    }
    // search from the left direction
    if (i &gt; 0 &amp;&amp; map[i][j] &gt; map[i - 1][j]) {
        curPathAndDrop = dfsForPathAndDrop(i - 1, j);
        if (curPathAndDrop[0] &gt; pathAndDrop[0])
            pathAndDrop = Arrays.copyOf(curPathAndDrop, curPathAndDrop.length);
    }
    // search from the right direction
    if (i &lt; (row - 1) &amp;&amp; map[i][j] &gt; map[i + 1][j]) {
        curPathAndDrop = dfsForPathAndDrop(i + 1, j);
        if (curPathAndDrop[0] &gt; pathAndDrop[0])
            pathAndDrop = Arrays.copyOf(curPathAndDrop, curPathAndDrop.length);
    }
    pathAndDrop[0]++; // update the path length for each recursion
    return pathAndDrop;
}
</code></pre>

<h3 id="record-ski-path">Record Ski Path</h3>

<p>The above codes will generate a path matrix and drop matrix, the path matrix stores the maximal path length of each element and the drop matrix stores the maximal drop of each element, then you only need to traverse the matrix again and pick up the element with maximal path length and drop among all. However, here also gives a method to record the ski path:</p>

<pre><code class="language-java">// record the path of the maximal path length
public static List&lt;Integer&gt; dfsForPath(int x, int y) {
    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();
    List&lt;Integer&gt; curPathList = new ArrayList&lt;Integer&gt;();
    // search from the up direction
    if (y &gt; 0 &amp;&amp; map[x][y] &gt; map[x][y - 1]) {
        curPathList = dfsForPath(x, y - 1);
        if (curPathList.size() &gt; list.size())
            list = curPathList;
    }
    // search from the down direction
    if (y &lt; (column - 1) &amp;&amp; map[x][y] &gt; map[x][y + 1]) {
        curPathList = dfsForPath(x, y + 1);
        if (curPathList.size() &gt; list.size())
            list = curPathList;
    }
    // search from the left direction
    if (x &gt; 0 &amp;&amp; map[x][y] &gt; map[x - 1][y]) {
        curPathList = dfsForPath(x - 1, y);
        if (curPathList.size() &gt; list.size())
            list = curPathList;
    }
    // search from the right direction
    if (x &lt; (row - 1) &amp;&amp; map[x][y] &gt; map[x + 1][y]) {
        curPathList = dfsForPath(x + 1, y);
        if (curPathList.size() &gt; list.size())
            list = curPathList;
    }
    list.add(y); // add y first, because we will reverse the list later
    list.add(x); // add x
    return list;
}
</code></pre>

<h3 id="source">Source</h3>

<p>Full codes of skiing in singapore solution can be found in my GitHub repository: <a href="https://github.com/IsaacChanghau/LeetCode/tree/master/src/main/java/com/isaac/skiinginsingapore" target="_blank">[link]</a>.
For a better understanding of Depth-first search (dfs) algorithm, please visit its wikipedia page: <a href="https://en.wikipedia.org/wiki/Depth-first_search" target="_blank">[link]</a>.</p>

    </div>

    


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/java">java</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/algorithms">algorithms</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/depth-first-search">depth-first-search</a>
  
</div>




    
    

    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017-2018 &middot; 

      <strong>Isaac Changhau (Zhang Hao)</strong>
      

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    <script async defer src="//maps.googleapis.com/maps/api/js?key="></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/c.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/html.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ 
          tex2jax: { 
            inlineMath: [['$','$'], ['\\(','\\)']] 
          } 
        });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-xAWI9i8WMRLdgksuhaMCYMTw9D+MEc2cYVBApWwGRJ0cdcywTjMovOfJnlGt9LlEQj6QzyMzpIZLMYujetPcQg==" crossorigin="anonymous"></script>
    
    
    

  </body>
</html>

